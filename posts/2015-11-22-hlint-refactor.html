<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Automatically Apply HLint Suggestions</title>
        <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link href="https://fonts.googleapis.com/css?family=Vollkorn" rel="stylesheet" type="text/css">
    </head>
    <body>
        <div class="container">
          <div class="row">
            <div class="col-sm-auto">
              <ul class="nav flex-column">
              <li class="nav-item">
                <a href="../">Home</a>
              </li>
              <li class="nav-item">
                <a href="../about.html">About</a> <br>
              </li>
              <li>
                <a href="../publications.html">Publications</a>
              </li>
              <li>
                <a href="../plugins.html">Plugins</a>
              </li>
              <li>
                <a href="../eventlog2html">eventlog2html</a>
              </li>
              <li>
                <a href="../ide/index.html">
                <img style="height: 0.9em; margin-right: 2px;" src="../ide/images/haskell-logo.svg" /></span>
                IDE</a>
              </li>
          <!---
              <li>
                <a href="/bristol2020.html">Bristol 2020</a>
              </li>
              <li>
                <a href="https://andreaspk.github.io/ghc-week">GHC Week</a>
              </li>
          --->
              <li>
                <a href="../maps.html">Maps</a>
              </li>
              <li>
                <a href="../hurstwood.html">Hurstwood TrailO</a>
              </li>
              <li class="nav-item">
                <a href="../archive.html">Archive</a> <br>
              </li>
              <li>
                <a href="../atom.xml">Feed</a>
              </li>
              </ul>
            </div>
          <div class="col-md">

            <div id="content">
              <h2> Automatically Apply HLint Suggestions </h2>
<p class="text-muted">
    Posted on November 22, 2015
    
</p>

<p>Users upgrading to <a href="https://hackage.haskell.org/package/hlint-1.9.23">hlint 1.9.23</a> will now be able to take advantage of the new <code>--refactor</code> flag which by invoking the <code>refactor</code> executable supplied by <a href="https://hackage.haskell.org/package/apply-refact-0.1.0.0"><code>apply-refact</code></a> can automatically apply suggestions.</p>
<p><img src="http://i.imgur.com/5hiEZJo.gif" alt="example" /><br />
</p>
<!--more-->
<h1 id="getting-started">Getting Started</h1>
<pre><code>cabal install hlint
cabal install apply-refact
hlint --refactor myfile.hs</code></pre>
<p>To take advantage of this flag users also need to install the <code>refactor</code> executable which is provided by <code>apply-refact</code>. Users can directly invoke <code>refactor</code> if they wish but it is easier to invoke it via hlint, passing any extra options with the <code>--refactor-options</code> flag.</p>
<p>HLint will by default apply all suggestions without any prompts to the user and output the result on stdout.</p>
<p><img src="http://i.imgur.com/cmxQJiI.gif" alt="example2" /><br />
</p>
<p>If you’re feeling cautious, the <code>-s</code> flag will prompt you before applying each refactoring.</p>
<p><img src="http://i.imgur.com/pxygqXI.gif" alt="sexample" /><br />
</p>
<p>If you’re feeling brave, the <code>-i</code> flag will perform the refactoring in place.</p>
<p><img src="http://i.imgur.com/QJOGoHL.gif?1" alt="iexample" /><br />
</p>
<p>The final option which is useful for tool writers is the <code>--pos</code> flag which specifies the region to which hints should be applied to.</p>
<p><img src="http://i.imgur.com/vOmNwq0.gif?1" alt="posexample" /><br />
</p>
<h1 id="editor-integration">Editor Integration</h1>
<p>There are plugins availible for vim, emacs and atom. Moritz Kiefer has already helped me with the emacs plugin, pull requests to clean up the other two plugins would be greatly appreciated.</p>
<ul>
<li><a href="https://github.com/mpickering/hlint-refactor-vim"><code>hlint-refactor-vim</code></a></li>
<li><a href="https://github.com/mpickering/hlint-refactor-atom"><code>hlint-refactor-atom</code></a></li>
<li><a href="https://github.com/mpickering/hlint-refactor-mode"><code>hlint-refactor-mode</code></a></li>
</ul>
<h1 id="reporting-bugs">Reporting Bugs</h1>
<p>If you find that the program gives you an unexpected result then please report a bug to the <a href="https://github.com/mpickering/apply-refact">issue tracker</a>. Please also include the output of <code>hlint --serialise</code> and the input file.</p>
<p>There are a few known problems with CPP and a few corner cases which are not handled by the underlying library but for most users, a pain-free experience is expected.</p>
<h2 id="known-issues">Known Issues</h2>
<ul>
<li><p>Tabs and trailing whitespace will be removed (this is by design and not going to change). Line endings are changed to unix line endings.</p></li>
<li><p>Not all hlint suggestions are supported. A notable exception being the eta reduction refactoring as it proved quite difficult to implement correctly.</p></li>
<li><p>Sometimes hlint suggests a refactoring which uses a name which isn’t in scope. The tool is quite dumb! It just takes whatever hlint suggests and applies it blindly. It might be good to add an option to hlint to avoid spitting out hints which do this.</p></li>
</ul>

            </div>
          </div>
        </div>
      </div>
    </body>
</html>
