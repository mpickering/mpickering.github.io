<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- (c) The University of Glasgow 2006</span><span>
</span><a name="line-2"></a><span class="hs-comment">-- (c) The GRASP/AQUA Project, Glasgow University, 1992-1998</span><span>
</span><a name="line-3"></a><span class="hs-comment">--</span><span>
</span><a name="line-4"></a><span class="hs-comment">-- The @Class@ datatype</span><span>
</span><a name="line-5"></a><span>
</span><a name="line-6"></a><span class="hs-pragma">{-# LANGUAGE CPP, DeriveDataTypeable #-}</span><span>
</span><a name="line-7"></a><span>
</span><a name="line-8"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Class</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-9"></a><span>        </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span class="hs-special">,</span><span>
</span><a name="line-10"></a><span>        </span><a href="Class.html#ClassOpItem"><span class="hs-identifier hs-type">ClassOpItem</span></a><span class="hs-special">,</span><span>
</span><a name="line-11"></a><span>        </span><a href="Class.html#ClassATItem"><span class="hs-identifier hs-type">ClassATItem</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-12"></a><span>        </span><a href="Class.html#ClassMinimalDef"><span class="hs-identifier hs-type">ClassMinimalDef</span></a><span class="hs-special">,</span><span>
</span><a name="line-13"></a><span>        </span><a href="Class.html#DefMethInfo"><span class="hs-identifier hs-type">DefMethInfo</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#pprDefMethInfo"><span class="hs-identifier hs-var">pprDefMethInfo</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#defMethSpecOfDefMeth"><span class="hs-identifier hs-var">defMethSpecOfDefMeth</span></a><span class="hs-special">,</span><span>
</span><a name="line-14"></a><span>
</span><a name="line-15"></a><span>        </span><a href="Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#pprFundeps"><span class="hs-identifier hs-var">pprFundeps</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#pprFunDep"><span class="hs-identifier hs-var">pprFunDep</span></a><span class="hs-special">,</span><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span>        </span><a href="Class.html#mkClass"><span class="hs-identifier hs-var">mkClass</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classTyVars"><span class="hs-identifier hs-var">classTyVars</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classArity"><span class="hs-identifier hs-var">classArity</span></a><span class="hs-special">,</span><span>
</span><a name="line-18"></a><span>        </span><a href="Class.html#classKey"><span class="hs-identifier hs-var">classKey</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#className"><span class="hs-identifier hs-var">className</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classATs"><span class="hs-identifier hs-var">classATs</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classATItems"><span class="hs-identifier hs-var">classATItems</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classTyCon"><span class="hs-identifier hs-var">classTyCon</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classMethods"><span class="hs-identifier hs-var">classMethods</span></a><span class="hs-special">,</span><span>
</span><a name="line-19"></a><span>        </span><a href="Class.html#classOpItems"><span class="hs-identifier hs-var">classOpItems</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classBigSig"><span class="hs-identifier hs-var">classBigSig</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classExtraBigSig"><span class="hs-identifier hs-var">classExtraBigSig</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classTvsFds"><span class="hs-identifier hs-var">classTvsFds</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classSCTheta"><span class="hs-identifier hs-var">classSCTheta</span></a><span class="hs-special">,</span><span>
</span><a name="line-20"></a><span>        </span><a href="Class.html#classAllSelIds"><span class="hs-identifier hs-var">classAllSelIds</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classSCSelId"><span class="hs-identifier hs-var">classSCSelId</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classMinimalDef"><span class="hs-identifier hs-var">classMinimalDef</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#classHasFds"><span class="hs-identifier hs-var">classHasFds</span></a><span class="hs-special">,</span><span>
</span><a name="line-21"></a><span>        </span><a href="Class.html#naturallyCoherentClass"><span class="hs-identifier hs-var">naturallyCoherentClass</span></a><span>
</span><a name="line-22"></a><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span class="hs-cpp">#include &quot;HsVersions.h&quot;</span><span>
</span><a name="line-25"></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE #-}</span><span> </span><a href="TyCon.html"><span class="hs-identifier">TyCon</span></a><span>     </span><span class="hs-special">(</span><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span class="hs-special">,</span><span> </span><a href="TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a><span class="hs-special">,</span><span> </span><a href="TyCon.html#tyConUnique"><span class="hs-identifier hs-var">tyConUnique</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE #-}</span><span> </span><a href="TyCoRep.html"><span class="hs-identifier">TyCoRep</span></a><span>   </span><span class="hs-special">(</span><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">,</span><span> </span><a href="TyCoRep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="Var.html"><span class="hs-identifier">Var</span></a><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><a href="Name.html"><span class="hs-identifier">Name</span></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><a href="BasicTypes.html"><span class="hs-identifier">BasicTypes</span></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><a href="Unique.html"><span class="hs-identifier">Unique</span></a><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="Util.html"><span class="hs-identifier">Util</span></a><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><a href="SrcLoc.html"><span class="hs-identifier">SrcLoc</span></a><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><a href="PrelNames.html"><span class="hs-identifier">PrelNames</span></a><span>    </span><span class="hs-special">(</span><span> </span><a href="PrelNames.html#eqTyConKey"><span class="hs-identifier hs-var">eqTyConKey</span></a><span class="hs-special">,</span><span> </span><a href="PrelNames.html#coercibleTyConKey"><span class="hs-identifier hs-var">coercibleTyConKey</span></a><span class="hs-special">,</span><span> </span><a href="PrelNames.html#typeableClassKey"><span class="hs-identifier hs-var">typeableClassKey</span></a><span class="hs-special">,</span><span>
</span><a name="line-35"></a><span>                      </span><a href="PrelNames.html#heqTyConKey"><span class="hs-identifier hs-var">heqTyConKey</span></a><span> </span><span class="hs-special">)</span><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><a href="Outputable.html"><span class="hs-identifier">Outputable</span></a><span>
</span><a name="line-37"></a><span class="hs-keyword">import</span><span> </span><a href="BooleanFormula.html"><span class="hs-identifier">BooleanFormula</span></a><span> </span><span class="hs-special">(</span><a href="BooleanFormula.html#BooleanFormula"><span class="hs-identifier hs-type">BooleanFormula</span></a><span class="hs-special">)</span><span>
</span><a name="line-38"></a><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Typeable</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a><span class="hs-special">)</span><span>
</span><a name="line-40"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html"><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Data</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Data</span><span>
</span><a name="line-41"></a><span>
</span><a name="line-42"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Class-basic]{@Class@: basic definition}
*                                                                      *
************************************************************************

A @Class@ corresponds to a Greek kappa in the static semantics:
-}</span><span>
</span><a name="line-51"></a><span>
</span><a name="line-52"></a><span class="hs-keyword">data</span><span> </span><a name="Class"><a href="Class.html#Class"><span class="hs-identifier">Class</span></a></a><span>
</span><a name="line-53"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="Class"><a href="Class.html#Class"><span class="hs-identifier">Class</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-54"></a><span>        </span><a href="Class.html#classTyCon"><span class="hs-identifier">classTyCon</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span class="hs-special">,</span><span>    </span><span class="hs-comment">-- The data type constructor for</span><span>
</span><a name="line-55"></a><span>                                </span><span class="hs-comment">-- dictionaries of this class</span><span>
</span><a name="line-56"></a><span>                                </span><span class="hs-comment">-- See Note [ATyCon for classes] in TyCoRep</span><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span>        </span><a href="Class.html#className"><span class="hs-identifier">className</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">,</span><span>              </span><span class="hs-comment">-- Just the cached name of the TyCon</span><span>
</span><a name="line-59"></a><span>        </span><a href="Class.html#classKey"><span class="hs-identifier">classKey</span></a><span>  </span><span class="hs-glyph">::</span><span> </span><a href="Unique.html#Unique"><span class="hs-identifier hs-type">Unique</span></a><span class="hs-special">,</span><span>            </span><span class="hs-comment">-- Cached unique of TyCon</span><span>
</span><a name="line-60"></a><span>
</span><a name="line-61"></a><span>        </span><a href="Class.html#classTyVars"><span class="hs-identifier">classTyVars</span></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span>        </span><span class="hs-comment">-- The class kind and type variables;</span><span>
</span><a name="line-62"></a><span>                                        </span><span class="hs-comment">-- identical to those of the TyCon</span><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span>        </span><a href="Class.html#classFunDeps"><span class="hs-identifier">classFunDeps</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- The functional dependencies</span><span>
</span><a name="line-65"></a><span>
</span><a name="line-66"></a><span>        </span><span class="hs-comment">-- Superclasses: eg: (F a ~ b, F b ~ G a, Eq a, Show b)</span><span>
</span><a name="line-67"></a><span>        </span><span class="hs-comment">-- We need value-level selectors for both the dictionary</span><span>
</span><a name="line-68"></a><span>        </span><span class="hs-comment">-- superclasses and the equality superclasses</span><span>
</span><a name="line-69"></a><span>        </span><a href="Class.html#classSCTheta"><span class="hs-identifier">classSCTheta</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span>     </span><span class="hs-comment">-- Immediate superclasses,</span><span>
</span><a name="line-70"></a><span>        </span><a href="Class.html#classSCSels"><span class="hs-identifier">classSCSels</span></a><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span>           </span><span class="hs-comment">-- Selector functions to extract the</span><span>
</span><a name="line-71"></a><span>                                        </span><span class="hs-comment">--   superclasses from a</span><span>
</span><a name="line-72"></a><span>                                        </span><span class="hs-comment">--   dictionary of this class</span><span>
</span><a name="line-73"></a><span>        </span><span class="hs-comment">-- Associated types</span><span>
</span><a name="line-74"></a><span>        </span><a href="Class.html#classATStuff"><span class="hs-identifier">classATStuff</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassATItem"><span class="hs-identifier hs-type">ClassATItem</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- Associated type families</span><span>
</span><a name="line-75"></a><span>
</span><a name="line-76"></a><span>        </span><span class="hs-comment">-- Class operations (methods, not superclasses)</span><span>
</span><a name="line-77"></a><span>        </span><a href="Class.html#classOpStuff"><span class="hs-identifier">classOpStuff</span></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassOpItem"><span class="hs-identifier hs-type">ClassOpItem</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span>  </span><span class="hs-comment">-- Ordered by tag</span><span>
</span><a name="line-78"></a><span>
</span><a name="line-79"></a><span>        </span><span class="hs-comment">-- Minimal complete definition</span><span>
</span><a name="line-80"></a><span>        </span><a href="Class.html#classMinimalDef"><span class="hs-identifier">classMinimalDef</span></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#ClassMinimalDef"><span class="hs-identifier hs-type">ClassMinimalDef</span></a><span>
</span><a name="line-81"></a><span>     </span><span class="hs-special">}</span><span>
</span><a name="line-82"></a><span>  </span><span class="hs-keyword">deriving</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Typeable.Internal.html#Typeable"><span class="hs-identifier hs-type">Typeable</span></a><span>
</span><a name="line-83"></a><span>
</span><a name="line-84"></a><span class="hs-comment">--  | e.g.</span><span>
</span><a name="line-85"></a><span class="hs-comment">--</span><span>
</span><a name="line-86"></a><span class="hs-comment">-- &gt;  class C a b c | a b -&gt; c, a c -&gt; b where...</span><span>
</span><a name="line-87"></a><span class="hs-comment">--</span><span>
</span><a name="line-88"></a><span class="hs-comment">--  Here fun-deps are [([a,b],[c]), ([a,c],[b])]</span><span>
</span><a name="line-89"></a><span class="hs-comment">--</span><span>
</span><a name="line-90"></a><span class="hs-comment">--  - 'ApiAnnotation.AnnKeywordId' : 'ApiAnnotation.AnnRarrow'',</span><span>
</span><a name="line-91"></a><span>
</span><a name="line-92"></a><span class="hs-comment">-- For details on above see note [Api annotations] in ApiAnnotation</span><span>
</span><a name="line-93"></a><span class="hs-keyword">type</span><span> </span><a name="FunDep"><a href="Class.html#FunDep"><span class="hs-identifier">FunDep</span></a></a><span> </span><a name="local-1627566261"><a href="#local-1627566261"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="#local-1627566261"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span class="hs-special">[</span><a href="#local-1627566261"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-94"></a><span>
</span><a name="line-95"></a><span class="hs-keyword">type</span><span> </span><a name="ClassOpItem"><a href="Class.html#ClassOpItem"><span class="hs-identifier">ClassOpItem</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">,</span><span> </span><a href="Class.html#DefMethInfo"><span class="hs-identifier hs-type">DefMethInfo</span></a><span class="hs-special">)</span><span>
</span><a name="line-96"></a><span>        </span><span class="hs-comment">-- Selector function; contains unfolding</span><span>
</span><a name="line-97"></a><span>        </span><span class="hs-comment">-- Default-method info</span><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span class="hs-keyword">type</span><span> </span><a name="DefMethInfo"><a href="Class.html#DefMethInfo"><span class="hs-identifier">DefMethInfo</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">)</span><span>
</span><a name="line-100"></a><span>   </span><span class="hs-comment">-- Nothing                    No default method</span><span>
</span><a name="line-101"></a><span>   </span><span class="hs-comment">-- Just ($dm, VanillaDM)      A polymorphic default method, name $dm</span><span>
</span><a name="line-102"></a><span>   </span><span class="hs-comment">-- Just ($gm, GenericDM ty)   A generic default method, name $gm, type ty</span><span>
</span><a name="line-103"></a><span>   </span><span class="hs-comment">--                              The generic dm type is *not* quantified</span><span>
</span><a name="line-104"></a><span>   </span><span class="hs-comment">--                              over the class variables; ie has the</span><span>
</span><a name="line-105"></a><span>   </span><span class="hs-comment">--                              class vaiables free</span><span>
</span><a name="line-106"></a><span>
</span><a name="line-107"></a><span class="hs-keyword">data</span><span> </span><a name="ClassATItem"><a href="Class.html#ClassATItem"><span class="hs-identifier">ClassATItem</span></a></a><span>
</span><a name="line-108"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="ATI"><a href="Class.html#ATI"><span class="hs-identifier">ATI</span></a></a><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span>         </span><span class="hs-comment">-- See Note [Associated type tyvar names]</span><span>
</span><a name="line-109"></a><span>        </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><span class="hs-special">(</span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">,</span><span> </span><a href="SrcLoc.html#SrcSpan"><span class="hs-identifier hs-type">SrcSpan</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-110"></a><span>                      </span><span class="hs-comment">-- Default associated type (if any) from this template</span><span>
</span><a name="line-111"></a><span>                      </span><span class="hs-comment">-- Note [Associated type defaults]</span><span>
</span><a name="line-112"></a><span>
</span><a name="line-113"></a><span class="hs-keyword">type</span><span> </span><a name="ClassMinimalDef"><a href="Class.html#ClassMinimalDef"><span class="hs-identifier">ClassMinimalDef</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="BooleanFormula.html#BooleanFormula"><span class="hs-identifier hs-type">BooleanFormula</span></a><span> </span><a href="Name.html#Name"><span class="hs-identifier hs-type">Name</span></a><span> </span><span class="hs-comment">-- Required methods</span><span>
</span><a name="line-114"></a><span>
</span><a name="line-115"></a><span class="hs-comment">-- | Convert a `DefMethInfo` to a `DefMethSpec`, which discards the name field in</span><span>
</span><a name="line-116"></a><span class="hs-comment">--   the `DefMeth` constructor of the `DefMeth`.</span><span>
</span><a name="line-117"></a><span class="hs-identifier">defMethSpecOfDefMeth</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#DefMethInfo"><span class="hs-identifier hs-type">DefMethInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a><span> </span><span class="hs-special">(</span><a href="BasicTypes.html#DefMethSpec"><span class="hs-identifier hs-type">DefMethSpec</span></a><span> </span><a href="TyCoRep.html#Type"><span class="hs-identifier hs-type">Type</span></a><span class="hs-special">)</span><span>
</span><a name="line-118"></a><a name="defMethSpecOfDefMeth"><a href="Class.html#defMethSpecOfDefMeth"><span class="hs-identifier">defMethSpecOfDefMeth</span></a></a><span> </span><a name="local-1627566264"><a href="#local-1627566264"><span class="hs-identifier">meth</span></a></a><span>
</span><a name="line-119"></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-1627566264"><span class="hs-identifier hs-var">meth</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-120"></a><span>     </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>
</span><a name="line-121"></a><span>     </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><a name="local-1627566265"><a href="#local-1627566265"><span class="hs-identifier">spec</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><a href="#local-1627566265"><span class="hs-identifier hs-var">spec</span></a><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span class="hs-comment">{-
Note [Associated type defaults]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The following is an example of associated type defaults:
   class C a where
     data D a r

     type F x a b :: *
     type F p q r = (p,q)-&gt;r    -- Default

Note that

 * The TyCons for the associated types *share type variables* with the
   class, so that we can tell which argument positions should be
   instantiated in an instance decl.  (The first for 'D', the second
   for 'F'.)

 * We can have default definitions only for *type* families,
   not data families

 * In the default decl, the &quot;patterns&quot; should all be type variables,
   but (in the source language) they don't need to be the same as in
   the 'type' decl signature or the class.  It's more like a
   free-standing 'type instance' declaration.

 * HOWEVER, in the internal ClassATItem we rename the RHS to match the
   tyConTyVars of the family TyCon.  So in the example above we'd get
   a ClassATItem of
        ATI F ((x,a) -&gt; b)
   So the tyConTyVars of the family TyCon bind the free vars of
   the default Type rhs

The @mkClass@ function fills in the indirect superclasses.

The SrcSpan is for the entire original declaration.
-}</span><span>
</span><a name="line-159"></a><span>
</span><a name="line-160"></a><span class="hs-identifier">mkClass</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span>
</span><a name="line-161"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-162"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">]</span><span>
</span><a name="line-163"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassATItem"><span class="hs-identifier hs-type">ClassATItem</span></a><span class="hs-special">]</span><span>
</span><a name="line-164"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassOpItem"><span class="hs-identifier hs-type">ClassOpItem</span></a><span class="hs-special">]</span><span>
</span><a name="line-165"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Class.html#ClassMinimalDef"><span class="hs-identifier hs-type">ClassMinimalDef</span></a><span>
</span><a name="line-166"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span>
</span><a name="line-167"></a><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span>
</span><a name="line-168"></a><span>
</span><a name="line-169"></a><a name="mkClass"><a href="Class.html#mkClass"><span class="hs-identifier">mkClass</span></a></a><span> </span><a name="local-1627566266"><a href="#local-1627566266"><span class="hs-identifier">tyvars</span></a></a><span> </span><a name="local-1627566267"><a href="#local-1627566267"><span class="hs-identifier">fds</span></a></a><span> </span><a name="local-1627566268"><a href="#local-1627566268"><span class="hs-identifier">super_classes</span></a></a><span> </span><a name="local-1627566269"><a href="#local-1627566269"><span class="hs-identifier">superdict_sels</span></a></a><span> </span><a name="local-1627566270"><a href="#local-1627566270"><span class="hs-identifier">at_stuff</span></a></a><span>
</span><a name="line-170"></a><span>        </span><a name="local-1627566271"><a href="#local-1627566271"><span class="hs-identifier">op_stuff</span></a></a><span> </span><a name="local-1627566272"><a href="#local-1627566272"><span class="hs-identifier">mindef</span></a></a><span> </span><a name="local-1627566273"><a href="#local-1627566273"><span class="hs-identifier">tycon</span></a></a><span>
</span><a name="line-171"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">classKey</span><span>     </span><span class="hs-glyph">=</span><span> </span><a href="TyCon.html#tyConUnique"><span class="hs-identifier hs-var">tyConUnique</span></a><span> </span><a href="#local-1627566273"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">,</span><span>
</span><a name="line-172"></a><span>            </span><span class="hs-identifier">className</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="TyCon.html#tyConName"><span class="hs-identifier hs-var">tyConName</span></a><span> </span><a href="#local-1627566273"><span class="hs-identifier hs-var">tycon</span></a><span class="hs-special">,</span><span>
</span><a name="line-173"></a><span>            </span><span class="hs-identifier">classTyVars</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566266"><span class="hs-identifier hs-var">tyvars</span></a><span class="hs-special">,</span><span>
</span><a name="line-174"></a><span>            </span><span class="hs-identifier">classFunDeps</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566267"><span class="hs-identifier hs-var">fds</span></a><span class="hs-special">,</span><span>
</span><a name="line-175"></a><span>            </span><span class="hs-identifier">classSCTheta</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566268"><span class="hs-identifier hs-var">super_classes</span></a><span class="hs-special">,</span><span>
</span><a name="line-176"></a><span>            </span><span class="hs-identifier">classSCSels</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566269"><span class="hs-identifier hs-var">superdict_sels</span></a><span class="hs-special">,</span><span>
</span><a name="line-177"></a><span>            </span><span class="hs-identifier">classATStuff</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566270"><span class="hs-identifier hs-var">at_stuff</span></a><span class="hs-special">,</span><span>
</span><a name="line-178"></a><span>            </span><span class="hs-identifier">classOpStuff</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566271"><span class="hs-identifier hs-var">op_stuff</span></a><span class="hs-special">,</span><span>
</span><a name="line-179"></a><span>            </span><span class="hs-identifier">classMinimalDef</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566272"><span class="hs-identifier hs-var">mindef</span></a><span class="hs-special">,</span><span>
</span><a name="line-180"></a><span>            </span><span class="hs-identifier">classTyCon</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566273"><span class="hs-identifier hs-var">tycon</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-181"></a><span>
</span><a name="line-182"></a><span class="hs-comment">{-
Note [Associated type tyvar names]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The TyCon of an associated type should use the same variable names as its
parent class. Thus
    class C a b where
      type F b x a :: *
We make F use the same Name for 'a' as C does, and similary 'b'.

The reason for this is when checking instances it's easier to match
them up, to ensure they match.  Eg
    instance C Int [d] where
      type F [d] x Int = ....
we should make sure that the first and third args match the instance
header.

Having the same variables for class and tycon is also used in checkValidRoles
(in TcTyClsDecls) when checking a class's roles.


************************************************************************
*                                                                      *
\subsection[Class-selectors]{@Class@: simple selectors}
*                                                                      *
************************************************************************

The rest of these functions are just simple selectors.
-}</span><span>
</span><a name="line-210"></a><span>
</span><a name="line-211"></a><span class="hs-identifier">classArity</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="BasicTypes.html#Arity"><span class="hs-identifier hs-type">Arity</span></a><span>
</span><a name="line-212"></a><a name="classArity"><a href="Class.html#classArity"><span class="hs-identifier">classArity</span></a></a><span> </span><a name="local-1627566274"><a href="#local-1627566274"><span class="hs-identifier">clas</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#length"><span class="hs-identifier hs-var">length</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier">classTyVars</span><span> </span><a href="#local-1627566274"><span class="hs-identifier hs-var">clas</span></a><span class="hs-special">)</span><span>
</span><a name="line-213"></a><span>        </span><span class="hs-comment">-- Could memoise this</span><span>
</span><a name="line-214"></a><span>
</span><a name="line-215"></a><span class="hs-identifier">classAllSelIds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">]</span><span>
</span><a name="line-216"></a><span class="hs-comment">-- Both superclass-dictionary and method selectors</span><span>
</span><a name="line-217"></a><a name="classAllSelIds"><a href="Class.html#classAllSelIds"><span class="hs-identifier">classAllSelIds</span></a></a><span> </span><a name="local-1627566275"><a href="#local-1627566275"><span class="hs-identifier">c</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">classSCSels</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566276"><a href="#local-1627566276"><span class="hs-identifier">sc_sels</span></a></a><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-218"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566276"><span class="hs-identifier hs-var">sc_sels</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a><span> </span><a href="Class.html#classMethods"><span class="hs-identifier hs-var">classMethods</span></a><span> </span><a href="#local-1627566275"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-219"></a><span>
</span><a name="line-220"></a><span class="hs-identifier">classSCSelId</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span>
</span><a name="line-221"></a><span class="hs-comment">-- Get the n'th superclass selector Id</span><span>
</span><a name="line-222"></a><span class="hs-comment">-- where n is 0-indexed, and counts</span><span>
</span><a name="line-223"></a><span class="hs-comment">--    *all* superclasses including equalities</span><span>
</span><a name="line-224"></a><a name="classSCSelId"><a href="Class.html#classSCSelId"><span class="hs-identifier">classSCSelId</span></a></a><span> </span><span class="hs-special">(</span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">classSCSels</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566277"><a href="#local-1627566277"><span class="hs-identifier">sc_sels</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><a name="local-1627566278"><a href="#local-1627566278"><span class="hs-identifier">n</span></a></a><span>
</span><a name="line-225"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">ASSERT</span><span class="hs-special">(</span><span> </span><a href="Util.html#debugIsOn"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="Util.html#debugIsOn"><span class="hs-operator hs-var">&gt;=</span></a><span> </span><span class="hs-number">0</span><span> </span><span class="hs-operator">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">n</span><span> </span><span class="hs-operator">&lt;</span><span> </span><span class="hs-identifier">length</span><span> </span><span class="hs-identifier">sc_sels</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-226"></a><span>    </span><a href="#local-1627566277"><span class="hs-identifier hs-var">sc_sels</span></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.List.html#%21%21"><span class="hs-operator hs-var">!!</span></a><span> </span><a href="#local-1627566278"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-227"></a><span>
</span><a name="line-228"></a><span class="hs-identifier">classMethods</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">]</span><span>
</span><a name="line-229"></a><a name="classMethods"><a href="Class.html#classMethods"><span class="hs-identifier">classMethods</span></a></a><span> </span><span class="hs-special">(</span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">classOpStuff</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566279"><a href="#local-1627566279"><span class="hs-identifier">op_stuff</span></a></a><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-230"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="#local-1627566280"><span class="hs-identifier hs-var">op_sel</span></a><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><a name="local-1627566280"><a href="#local-1627566280"><span class="hs-identifier">op_sel</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1627566279"><span class="hs-identifier hs-var">op_stuff</span></a><span class="hs-special">]</span><span>
</span><a name="line-231"></a><span>
</span><a name="line-232"></a><span class="hs-identifier">classOpItems</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassOpItem"><span class="hs-identifier hs-type">ClassOpItem</span></a><span class="hs-special">]</span><span>
</span><a name="line-233"></a><a name="classOpItems"><a href="Class.html#classOpItems"><span class="hs-identifier">classOpItems</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classOpStuff</span><span>
</span><a name="line-234"></a><span>
</span><a name="line-235"></a><span class="hs-identifier">classATs</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="TyCon.html#TyCon"><span class="hs-identifier hs-type">TyCon</span></a><span class="hs-special">]</span><span>
</span><a name="line-236"></a><a name="classATs"><a href="Class.html#classATs"><span class="hs-identifier">classATs</span></a></a><span> </span><span class="hs-special">(</span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">classATStuff</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566281"><a href="#local-1627566281"><span class="hs-identifier">at_stuff</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-237"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="#local-1627566282"><span class="hs-identifier hs-var">tc</span></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="Class.html#ATI"><span class="hs-identifier hs-var">ATI</span></a><span> </span><a name="local-1627566282"><a href="#local-1627566282"><span class="hs-identifier">tc</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-1627566281"><span class="hs-identifier hs-var">at_stuff</span></a><span class="hs-special">]</span><span>
</span><a name="line-238"></a><span>
</span><a name="line-239"></a><span class="hs-identifier">classATItems</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassATItem"><span class="hs-identifier hs-type">ClassATItem</span></a><span class="hs-special">]</span><span>
</span><a name="line-240"></a><a name="classATItems"><a href="Class.html#classATItems"><span class="hs-identifier">classATItems</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classATStuff</span><span>
</span><a name="line-241"></a><span>
</span><a name="line-242"></a><span class="hs-identifier">classTvsFds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-243"></a><a name="classTvsFds"><a href="Class.html#classTvsFds"><span class="hs-identifier">classTvsFds</span></a></a><span> </span><a name="local-1627566283"><a href="#local-1627566283"><span class="hs-identifier">c</span></a></a><span>
</span><a name="line-244"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">classTyVars</span><span> </span><a href="#local-1627566283"><span class="hs-identifier hs-var">c</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">classFunDeps</span><span> </span><a href="#local-1627566283"><span class="hs-identifier hs-var">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-245"></a><span>
</span><a name="line-246"></a><span class="hs-identifier">classHasFds</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-247"></a><a name="classHasFds"><a href="Class.html#classHasFds"><span class="hs-identifier">classHasFds</span></a></a><span> </span><span class="hs-special">(</span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">classFunDeps</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566284"><a href="#local-1627566284"><span class="hs-identifier">fds</span></a></a><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a><span> </span><a href="#local-1627566284"><span class="hs-identifier hs-var">fds</span></a><span class="hs-special">)</span><span>
</span><a name="line-248"></a><span>
</span><a name="line-249"></a><span class="hs-identifier">classBigSig</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassOpItem"><span class="hs-identifier hs-type">ClassOpItem</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-250"></a><a name="classBigSig"><a href="Class.html#classBigSig"><span class="hs-identifier">classBigSig</span></a></a><span> </span><span class="hs-special">(</span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">classTyVars</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566285"><a href="#local-1627566285"><span class="hs-identifier">tyvars</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">classSCTheta</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566286"><a href="#local-1627566286"><span class="hs-identifier">sc_theta</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-251"></a><span>                    </span><span class="hs-identifier">classSCSels</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566287"><a href="#local-1627566287"><span class="hs-identifier">sc_sels</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">classOpStuff</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566288"><a href="#local-1627566288"><span class="hs-identifier">op_stuff</span></a></a><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-252"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-1627566285"><span class="hs-identifier hs-var">tyvars</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566286"><span class="hs-identifier hs-var">sc_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566287"><span class="hs-identifier hs-var">sc_sels</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566288"><span class="hs-identifier hs-var">op_stuff</span></a><span class="hs-special">)</span><span>
</span><a name="line-253"></a><span>
</span><a name="line-254"></a><span class="hs-identifier">classExtraBigSig</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a><span> </span><a href="Var.html#TyVar"><span class="hs-identifier hs-type">TyVar</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="TyCoRep.html#PredType"><span class="hs-identifier hs-type">PredType</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Var.html#Id"><span class="hs-identifier hs-type">Id</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassATItem"><span class="hs-identifier hs-type">ClassATItem</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Class.html#ClassOpItem"><span class="hs-identifier hs-type">ClassOpItem</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-255"></a><a name="classExtraBigSig"><a href="Class.html#classExtraBigSig"><span class="hs-identifier">classExtraBigSig</span></a></a><span> </span><span class="hs-special">(</span><a href="Class.html#Class"><span class="hs-identifier hs-var">Class</span></a><span> </span><span class="hs-special">{</span><span class="hs-identifier">classTyVars</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566289"><a href="#local-1627566289"><span class="hs-identifier">tyvars</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">classFunDeps</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566290"><a href="#local-1627566290"><span class="hs-identifier">fundeps</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-256"></a><span>                         </span><span class="hs-identifier">classSCTheta</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566291"><a href="#local-1627566291"><span class="hs-identifier">sc_theta</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">classSCSels</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566292"><a href="#local-1627566292"><span class="hs-identifier">sc_sels</span></a></a><span class="hs-special">,</span><span>
</span><a name="line-257"></a><span>                         </span><span class="hs-identifier">classATStuff</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566293"><a href="#local-1627566293"><span class="hs-identifier">ats</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">classOpStuff</span><span> </span><span class="hs-glyph">=</span><span> </span><a name="local-1627566294"><a href="#local-1627566294"><span class="hs-identifier">op_stuff</span></a></a><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><a name="line-258"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-1627566289"><span class="hs-identifier hs-var">tyvars</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566290"><span class="hs-identifier hs-var">fundeps</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566291"><span class="hs-identifier hs-var">sc_theta</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566292"><span class="hs-identifier hs-var">sc_sels</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566293"><span class="hs-identifier hs-var">ats</span></a><span class="hs-special">,</span><span> </span><a href="#local-1627566294"><span class="hs-identifier hs-var">op_stuff</span></a><span class="hs-special">)</span><span>
</span><a name="line-259"></a><span>
</span><a name="line-260"></a><span class="hs-comment">-- | If a class is &quot;naturally coherent&quot;, then we needn't worry at all, in any</span><span>
</span><a name="line-261"></a><span class="hs-comment">-- way, about overlapping/incoherent instances. Just solve the thing!</span><span>
</span><a name="line-262"></a><span class="hs-identifier">naturallyCoherentClass</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span>
</span><a name="line-263"></a><span class="hs-comment">-- See also Note [The equality class story] in TysPrim.</span><span>
</span><a name="line-264"></a><a name="naturallyCoherentClass"><a href="Class.html#naturallyCoherentClass"><span class="hs-identifier">naturallyCoherentClass</span></a></a><span> </span><a name="local-1627566295"><a href="#local-1627566295"><span class="hs-identifier">cls</span></a></a><span>
</span><a name="line-265"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="#local-1627566295"><span class="hs-identifier hs-var">cls</span></a><span> </span><span class="hs-special">`</span><a href="Unique.html#hasKey"><span class="hs-identifier hs-var">hasKey</span></a><span class="hs-special">`</span><span> </span><a href="PrelNames.html#heqTyConKey"><span class="hs-identifier hs-var">heqTyConKey</span></a><span> </span><span class="hs-operator hs-var">||</span><span>
</span><a name="line-266"></a><span>    </span><a href="#local-1627566295"><span class="hs-identifier hs-var">cls</span></a><span> </span><span class="hs-special">`</span><a href="Unique.html#hasKey"><span class="hs-identifier hs-var">hasKey</span></a><span class="hs-special">`</span><span> </span><a href="PrelNames.html#eqTyConKey"><span class="hs-identifier hs-var">eqTyConKey</span></a><span> </span><span class="hs-operator hs-var">||</span><span>
</span><a name="line-267"></a><span>    </span><a href="#local-1627566295"><span class="hs-identifier hs-var">cls</span></a><span> </span><span class="hs-special">`</span><a href="Unique.html#hasKey"><span class="hs-identifier hs-var">hasKey</span></a><span class="hs-special">`</span><span> </span><a href="PrelNames.html#coercibleTyConKey"><span class="hs-identifier hs-var">coercibleTyConKey</span></a><span> </span><span class="hs-operator hs-var">||</span><span>
</span><a name="line-268"></a><span>    </span><a href="#local-1627566295"><span class="hs-identifier hs-var">cls</span></a><span> </span><span class="hs-special">`</span><a href="Unique.html#hasKey"><span class="hs-identifier hs-var">hasKey</span></a><span class="hs-special">`</span><span> </span><a href="PrelNames.html#typeableClassKey"><span class="hs-identifier hs-var">typeableClassKey</span></a><span>
</span><a name="line-269"></a><span>
</span><a name="line-270"></a><span class="hs-comment">{-
************************************************************************
*                                                                      *
\subsection[Class-instances]{Instance declarations for @Class@}
*                                                                      *
************************************************************************

We compare @Classes@ by their keys (which include @Uniques@).
-}</span><span>
</span><a name="line-279"></a><span>
</span><a name="line-280"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-281"></a><span>    </span><a name="local-1627566315"><a href="#local-1627566315"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-805306535"><span class="hs-operator">==</span></a><span> </span><a name="local-1627566316"><a href="#local-1627566316"><span class="hs-identifier">c2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566315"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566316"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-282"></a><span>    </span><a name="local-1627566317"><a href="#local-1627566317"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1912608688"><span class="hs-operator">/=</span></a><span> </span><a name="local-1627566318"><a href="#local-1627566318"><span class="hs-identifier">c2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566317"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566318"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-283"></a><span>
</span><a name="line-284"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-285"></a><span>    </span><a name="local-1627566305"><a href="#local-1627566305"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1912608690"><span class="hs-operator">&lt;=</span></a><span> </span><a name="local-1627566306"><a href="#local-1627566306"><span class="hs-identifier">c2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566305"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-operator hs-var">&lt;=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566306"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-286"></a><span>    </span><a name="local-1627566307"><a href="#local-1627566307"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1912608694"><span class="hs-operator">&lt;</span></a><span>  </span><a name="local-1627566308"><a href="#local-1627566308"><span class="hs-identifier">c2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566307"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-operator hs-var">&lt;</span><span>  </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566308"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-287"></a><span>    </span><a name="local-1627566309"><a href="#local-1627566309"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-805306536"><span class="hs-operator">&gt;=</span></a><span> </span><a name="local-1627566310"><a href="#local-1627566310"><span class="hs-identifier">c2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566309"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-operator hs-var">&gt;=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566310"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-288"></a><span>    </span><a name="local-1627566311"><a href="#local-1627566311"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1912608695"><span class="hs-operator">&gt;</span></a><span>  </span><a name="local-1627566312"><a href="#local-1627566312"><span class="hs-identifier">c2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566311"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span>  </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566312"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-289"></a><span>    </span><a name="local-1912608689"><span class="hs-identifier">compare</span></a><span> </span><a name="local-1627566313"><a href="#local-1627566313"><span class="hs-identifier">c1</span></a></a><span> </span><a name="local-1627566314"><a href="#local-1627566314"><span class="hs-identifier">c2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566313"><span class="hs-identifier hs-var">c1</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">compare</span><span class="hs-special">`</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566314"><span class="hs-identifier hs-var">c2</span></a><span>
</span><a name="line-290"></a><span>
</span><a name="line-291"></a><span class="hs-keyword">instance</span><span> </span><a href="Unique.html#Uniquable"><span class="hs-identifier hs-type">Uniquable</span></a><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-292"></a><span>    </span><a name="local-1912706050"><a href="Unique.html#getUnique"><span class="hs-identifier">getUnique</span></a></a><span> </span><a name="local-1627566304"><a href="#local-1627566304"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">classKey</span><span> </span><a href="#local-1627566304"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-293"></a><span>
</span><a name="line-294"></a><span class="hs-keyword">instance</span><span> </span><a href="Name.html#NamedThing"><span class="hs-identifier hs-type">NamedThing</span></a><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-295"></a><span>    </span><a name="local-1912759012"><a href="Name.html#getName"><span class="hs-identifier">getName</span></a></a><span> </span><a name="local-1627566303"><a href="#local-1627566303"><span class="hs-identifier">clas</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">className</span><span> </span><a href="#local-1627566303"><span class="hs-identifier hs-var">clas</span></a><span>
</span><a name="line-296"></a><span>
</span><a name="line-297"></a><span class="hs-keyword">instance</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-298"></a><span>    </span><a name="local-1912686315"><a href="Outputable.html#ppr"><span class="hs-identifier">ppr</span></a></a><span> </span><a name="local-1627566302"><a href="#local-1627566302"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><span class="hs-special">(</span><a href="Name.html#getName"><span class="hs-identifier hs-var">getName</span></a><span> </span><a href="#local-1627566302"><span class="hs-identifier hs-var">c</span></a><span class="hs-special">)</span><span>
</span><a name="line-299"></a><span>
</span><a name="line-300"></a><span class="hs-identifier">pprDefMethInfo</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Class.html#DefMethInfo"><span class="hs-identifier hs-type">DefMethInfo</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-301"></a><a name="pprDefMethInfo"><a href="Class.html#pprDefMethInfo"><span class="hs-identifier">pprDefMethInfo</span></a></a><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a><span>                  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>   </span><span class="hs-comment">-- No default method</span><span>
</span><a name="line-302"></a><span class="hs-identifier">pprDefMethInfo</span><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a name="local-1627566296"><a href="#local-1627566296"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#VanillaDM"><span class="hs-identifier hs-var">VanillaDM</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Default method&quot;</span><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627566296"><span class="hs-identifier hs-var">n</span></a><span>
</span><a name="line-303"></a><span class="hs-identifier">pprDefMethInfo</span><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#Just"><span class="hs-identifier hs-var">Just</span></a><span> </span><span class="hs-special">(</span><a name="local-1627566297"><a href="#local-1627566297"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><a href="BasicTypes.html#GenericDM"><span class="hs-identifier hs-var">GenericDM</span></a><span> </span><a name="local-1627566298"><a href="#local-1627566298"><span class="hs-identifier">ty</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;Generic default method&quot;</span><span>
</span><a name="line-304"></a><span>                                          </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627566297"><span class="hs-identifier hs-var">n</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#dcolon"><span class="hs-identifier hs-var">dcolon</span></a><span> </span><a href="Outputable.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a><span> </span><a href="Outputable.html#ppr"><span class="hs-identifier hs-var">ppr</span></a><span> </span><a href="#local-1627566298"><span class="hs-identifier hs-var">ty</span></a><span>
</span><a name="line-305"></a><span>
</span><a name="line-306"></a><span class="hs-identifier">pprFundeps</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="#local-1627566263"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><a href="Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a><span> </span><a href="#local-1627566263"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-307"></a><a name="pprFundeps"><a href="Class.html#pprFundeps"><span class="hs-identifier">pprFundeps</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#empty"><span class="hs-identifier hs-var">empty</span></a><span>
</span><a name="line-308"></a><span class="hs-identifier">pprFundeps</span><span> </span><a name="local-1627566299"><a href="#local-1627566299"><span class="hs-identifier">fds</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a><span> </span><span class="hs-special">(</span><a href="Outputable.html#vbar"><span class="hs-identifier hs-var">vbar</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="Outputable.html#punctuate"><span class="hs-identifier hs-var">punctuate</span></a><span> </span><a href="Outputable.html#comma"><span class="hs-identifier hs-var">comma</span></a><span> </span><span class="hs-special">(</span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Base.html#map"><span class="hs-identifier hs-var">map</span></a><span> </span><a href="Class.html#pprFunDep"><span class="hs-identifier hs-var">pprFunDep</span></a><span> </span><a href="#local-1627566299"><span class="hs-identifier hs-var">fds</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-309"></a><span>
</span><a name="line-310"></a><span class="hs-identifier">pprFunDep</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Outputable.html#Outputable"><span class="hs-identifier hs-type">Outputable</span></a><span> </span><a href="#local-1627566262"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Class.html#FunDep"><span class="hs-identifier hs-type">FunDep</span></a><span> </span><a href="#local-1627566262"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Outputable.html#SDoc"><span class="hs-identifier hs-type">SDoc</span></a><span>
</span><a name="line-311"></a><a name="pprFunDep"><a href="Class.html#pprFunDep"><span class="hs-identifier">pprFunDep</span></a></a><span> </span><span class="hs-special">(</span><a name="local-1627566300"><a href="#local-1627566300"><span class="hs-identifier">us</span></a></a><span class="hs-special">,</span><span> </span><a name="local-1627566301"><a href="#local-1627566301"><span class="hs-identifier">vs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Outputable.html#hsep"><span class="hs-identifier hs-var">hsep</span></a><span> </span><span class="hs-special">[</span><a href="Outputable.html#interppSP"><span class="hs-identifier hs-var">interppSP</span></a><span> </span><a href="#local-1627566300"><span class="hs-identifier hs-var">us</span></a><span class="hs-special">,</span><span> </span><a href="Outputable.html#text"><span class="hs-identifier hs-var">text</span></a><span> </span><span class="hs-string">&quot;-&gt;&quot;</span><span class="hs-special">,</span><span> </span><a href="Outputable.html#interppSP"><span class="hs-identifier hs-var">interppSP</span></a><span> </span><a href="#local-1627566301"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">]</span><span>
</span><a name="line-312"></a><span>
</span><a name="line-313"></a><span class="hs-keyword">instance</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#Data"><span class="hs-identifier hs-type">Data</span><span class="hs-operator hs-type">.</span><span class="hs-identifier hs-type">Data</span></a><span> </span><a href="Class.html#Class"><span class="hs-identifier hs-type">Class</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-314"></a><span>    </span><span class="hs-comment">-- don't traverse?</span><span>
</span><a name="line-315"></a><span>    </span><a name="local-1912605886"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#toConstr"><span class="hs-identifier">toConstr</span></a></a><span> </span><span class="hs-identifier">_</span><span>   </span><span class="hs-glyph">=</span><span> </span><a href="Util.html#abstractConstr"><span class="hs-identifier hs-var">abstractConstr</span></a><span> </span><span class="hs-string">&quot;Class&quot;</span><span>
</span><a name="line-316"></a><span>    </span><a name="local-1912605887"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#gunfold"><span class="hs-identifier">gunfold</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span>  </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a><span> </span><span class="hs-string">&quot;gunfold&quot;</span><span>
</span><a name="line-317"></a><span>    </span><a name="local-1912605885"><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#dataTypeOf"><span class="hs-identifier">dataTypeOf</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="../base-4.9.0.0/src/%{MODULE/./-}.html#%{NAME}/Data.Data.html#mkNoRepType"><span class="hs-identifier hs-var">mkNoRepType</span></a><span> </span><span class="hs-string">&quot;Class&quot;</span><span>
</span><a name="line-318"></a></pre></body></html>